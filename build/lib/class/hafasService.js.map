{
  "version": 3,
  "sources": ["../../../src/lib/class/hafasService.ts"],
  "sourcesContent": ["/**\n * HafasService - kleiner Wrapper um `hafas-client`.\n *\n * Kapselt die Client-Erzeugung und bietet einfache asynchrone Methoden\n * f\u00FCr `locations` und `departures` an.\n */\nimport type {\n    Departures,\n    DeparturesArrivalsOptions,\n    Journeys,\n    JourneysOptions,\n    Location,\n    LocationsOptions,\n    Station,\n    Stop,\n} from 'hafas-client';\nimport { createClient as hafasClient } from 'hafas-client';\nimport { profile as dbProfile } from 'hafas-client/p/db/index.js';\nimport { profile as vbbProfile } from 'hafas-client/p/vbb/index.js';\nimport type { ITransportService } from '../types/transportService';\n\nexport class HafasService implements ITransportService {\n    private client: ReturnType<typeof hafasClient>;\n\n    /**\n     * Erzeugt eine neue Instanz des HafasService.\n     * Standardm\u00E4\u00DFig wird das VBB-Profil verwendet. Optional kann ein alternatives\n     * Profil als zweiten Parameter \u00FCbergeben werden (f\u00FCr Tests oder andere Netze).\n     *\n     * @param clientName optionaler Name, der an den Client \u00FCbergeben wird\n     * @param profile optionales HAFAS-Profil; falls nicht angegeben, wird vbbProfile genutzt\n     */\n    constructor(clientName: string, profile?: string) {\n        const usedProfile = this.resolveProfile(profile);\n        this.client = hafasClient(usedProfile, clientName);\n    }\n\n    /**\n     * Resolve a profile given either a ProfileName or a profile object.\n     * Falls `profile` leer ist, wird `vbbProfile` verwendet.\n     *\n     * @param profile entweder ein Eintrag aus `ProfileName` oder ein Profil-Objekt\n     * @returns das aufgel\u00F6ste Profil-Objekt\n     */\n    private resolveProfile(profile?: string): any {\n        if (!profile) {\n            return vbbProfile;\n        }\n\n        switch (profile) {\n            case 'vbb': {\n                return vbbProfile;\n            }\n            case 'db': {\n                return dbProfile;\n            }\n            default: {\n                throw new Error(\n                    `Unbekanntes Profile: ${String(\n                        profile,\n                    )}. Nutze entweder ein Profil-Objekt oder einen Namen aus ProfileName.`,\n                );\n            }\n        }\n    }\n\n    /**\n     * Suche nach Orten/Stationen.\n     *\n     * @param query Suchbegriff f\u00FCr Orte/Stationen\n     * @param options optionale Suchoptionen\n     * @returns Promise mit Suchergebnissen\n     */\n    async getLocations(query: string, options?: LocationsOptions): Promise<ReadonlyArray<Station | Stop | Location>> {\n        return this.client.locations(query, options);\n    }\n\n    /**\n     * Liefert Abfahrten f\u00FCr eine gegebene Stations-ID.\n     *\n     * @param stationId ID der Station\n     * @param options optionale Abfrage-Optionen\n     * @returns Promise mit Abfahrtsinformationen\n     */\n    async getDepartures(stationId: string, options?: DeparturesArrivalsOptions): Promise<Departures> {\n        return this.client.departures(stationId, options);\n    }\n\n    /**\n     * Liefert Routeninformationen zwischen zwei Stationen.\n     *\n     * @param fromId ID der Startstation\n     * @param toId ID der Zielstation\n     * @param options optionale Routen-Optionen\n     * @returns Promise mit Routeninformationen\n     */\n    async getRoute(fromId: string, toId: string, options?: JourneysOptions): Promise<Journeys> {\n        return this.client.journeys(fromId, toId, options);\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA,0BAA4C;AAC5C,gBAAqC;AACrC,iBAAsC;AAG/B,MAAM,aAA0C;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUR,YAAY,YAAoB,SAAkB;AAC9C,UAAM,cAAc,KAAK,eAAe,OAAO;AAC/C,SAAK,aAAS,oBAAAA,cAAY,aAAa,UAAU;AAAA,EACrD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASQ,eAAe,SAAuB;AAC1C,QAAI,CAAC,SAAS;AACV,aAAO,WAAAC;AAAA,IACX;AAEA,YAAQ,SAAS;AAAA,MACb,KAAK,OAAO;AACR,eAAO,WAAAA;AAAA,MACX;AAAA,MACA,KAAK,MAAM;AACP,eAAO,UAAAC;AAAA,MACX;AAAA,MACA,SAAS;AACL,cAAM,IAAI;AAAA,UACN,wBAAwB;AAAA,YACpB;AAAA,UACJ,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,MAAM,aAAa,OAAe,SAA+E;AAC7G,WAAO,KAAK,OAAO,UAAU,OAAO,OAAO;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,MAAM,cAAc,WAAmB,SAA0D;AAC7F,WAAO,KAAK,OAAO,WAAW,WAAW,OAAO;AAAA,EACpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,MAAM,SAAS,QAAgB,MAAc,SAA8C;AACvF,WAAO,KAAK,OAAO,SAAS,QAAQ,MAAM,OAAO;AAAA,EACrD;AACJ;",
  "names": ["hafasClient", "vbbProfile", "dbProfile"]
}
