{
  "version": 3,
  "sources": ["../../../src/lib/class/journeys.ts"],
  "sourcesContent": ["import type * as Hafas from 'hafas-client';\nimport type { TTAdapter } from '../../main';\nimport { StationRequest } from '../class/station';\nimport { BaseClass } from '../tools/library';\nimport { defaultJourneyOpt } from '../types/types';\n\nexport class JourneysRequest extends BaseClass {\n    private station: StationRequest;\n    private service: any;\n\n    constructor(adapter: TTAdapter) {\n        super(adapter);\n        this.log.setLogPrefix('journeyReq');\n        this.station = new StationRequest(adapter);\n    }\n    /**\n     *  Ruft Abfahrten f\u00FCr eine gegebene stationId ab und schreibt sie in die States.\n     *\n     * @param journeyId     Die ID der Verbindung.\n     * @param from          Die Startstation.\n     * @param to            Die Zielstation.\n     * @param service       Der Service f\u00FCr die Abfrage.\n     * @param options       Zus\u00E4tzliche Optionen f\u00FCr die Abfrage.\n     * @returns             true bei Erfolg, sonst false.\n     */\n    public async getJourneys(\n        journeyId: string,\n        from: string,\n        to: string,\n        service: any,\n        options: Hafas.JourneysOptions = {},\n    ): Promise<boolean> {\n        try {\n            if (!from || !to) {\n                throw new Error(this.library.translate('msg_journeyNoFromTo'));\n            }\n            this.service = service;\n            // Zusammenf\u00FChren der Standardoptionen mit den \u00FCbergebenen Optionen\n            const mergedOptions = { ...defaultJourneyOpt, ...options };\n            // Antwort von HAFAS als vollst\u00E4ndiger Typ\n            const response: Hafas.Journeys = await this.service.getJourneys(from, to, mergedOptions);\n            // Vollst\u00E4ndiges JSON f\u00FCr Debugging\n            this.adapter.log.debug(JSON.stringify(response, null, 1));\n            // Schreibe die Verbindungen in die States\n            await this.writeJourneysStates(journeyId, response);\n            return true;\n        } catch (error) {\n            this.log.error(this.library.translate('msg_journeyQueryError', from, to, (error as Error).message));\n            return false;\n        }\n    }\n\n    /**\n     * Filtert Abfahrten nach den gew\u00E4hlten Produkten.\n     * Es werden nur Abfahrten zur\u00FCckgegeben, deren Produkt in den aktivierten Produkten enthalten ist.\n     *\n     * @param departures    Die zu filternden Abfahrten\n     * @param products      Die aktivierten Produkte (true = erlaubt)\n     * @returns             Gefilterte Abfahrten\n     */\n    /* filterByProducts(departures: readonly Hafas.Alternative[], products: Partial<Products>): Hafas.Alternative[] {\n        // Erstelle eine Liste der aktivierten Produktnamen\n        const enabledProducts = Object.entries(products)\n            .filter(([_, enabled]) => enabled === true)\n            .map(([productName, _]) => productName);\n\n        // Wenn keine Produkte aktiviert sind, gib alle zur\u00FCck\n        if (enabledProducts.length === 0) {\n            return [...departures];\n        }\n\n        // Filtere Abfahrten: behalte nur die, deren line.product in enabledProducts ist\n        return departures.filter(departure => {\n            const lineProduct = departure.line?.product;\n            if (!lineProduct) {\n                this.log.info2(\n                    `Abfahrt ${departure.line?.name || 'unbekannt'} Richtung ${departure.direction} gefiltert: Keine Produktinfo vorhanden`,\n                );\n                return false;\n            }\n            const isEnabled = enabledProducts.includes(lineProduct);\n            if (!isEnabled) {\n                this.log.info2(\n                    `Abfahrt ${departure.line?.name} Richtung ${departure.direction} gefiltert: Produkt \"${lineProduct}\" nicht aktiviert`,\n                );\n            }\n            return isEnabled;\n        });\n    } */\n\n    /**\n     * Schreibt die Verbindungen in die States.\n     *\n     * @param journeyId     Die ID der Verbindung, f\u00FCr die die Teilstrecken/Legs geschrieben werden sollen.\n     * @param journeys      Die Verbindungen, die geschrieben werden sollen.\n     */\n    async writeJourneysStates(journeyId: string, journeys: Hafas.Journeys): Promise<void> {\n        try {\n            if (this.adapter.config.journeyConfig) {\n                for (const journey of this.adapter.config.journeyConfig) {\n                    // Erstelle Verbindungs-Ordner, falls nicht vorhanden\n                    await this.library.writedp(`${this.adapter.namespace}.Journeys.${journey.id}`, undefined, {\n                        _id: 'nicht_definieren',\n                        type: 'folder',\n                        common: {\n                            name: journey.customName,\n                            statusStates: { onlineId: `${this.adapter.namespace}.Journeys.${journey.id}.enabled` },\n                        },\n                        native: {},\n                    });\n                    // Schreibe, ob die Verbindung aktiviert ist\n                    await this.library.writedp(\n                        `${this.adapter.namespace}.Journeys.${journey.id}.enabled`,\n                        journey.enabled,\n                        {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_enabled'),\n                                type: 'boolean',\n                                role: 'indicator',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        },\n                    );\n                    // Vor dem Schreiben alte States l\u00F6schen\n                    await this.library.garbageColleting(`${this.adapter.namespace}.Routes.${journeyId}.`, 2000);\n                    // JSON in die States schreiben\n                    if (journey.enabled === true && journey.id === journeyId) {\n                        // Filtere nach Produkten, falls angegeben\n                        //const filteredDepartures = products ? this.filterByProducts(departures, products) : departures;\n\n                        await this.writesBaseStates(`${this.adapter.namespace}.Journeys.${journeyId}`, journeys);\n                    }\n                }\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyWriteError', (err as Error).message));\n        }\n    }\n\n    /**\n     * schreibt die Basis-States der Verbindungen.\n     *\n     * @param basePath Basis-Pfad f\u00FCr die States\n     * @param journeys Verbindungsdaten als Array von Hafas.Journeys\n     */\n    async writesBaseStates(basePath: string, journeys: Hafas.Journeys): Promise<void> {\n        try {\n            // Rohdaten der Verbindungen\n            await this.library.writedp(`${basePath}.json`, JSON.stringify(journeys), {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('raw_journeys_data'),\n                    type: 'string',\n                    role: 'json',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Station From/To ermitteln und schreiben\n            const stationFromId = journeys?.journeys?.[0].legs[0].origin?.id || undefined;\n            const stationToId =\n                journeys?.journeys?.[0].legs[journeys.journeys[0].legs.length - 1].destination?.id || undefined;\n            if (stationFromId !== undefined && stationToId !== undefined) {\n                const stationFrom = await this.station.getStation(stationFromId, this.service);\n                const stationTo = await this.station.getStation(stationToId, this.service);\n                await this.station.writeStationData(`${basePath}.StationFrom`, stationFrom);\n                await this.station.writeStationData(`${basePath}.StationTo`, stationTo);\n            }\n            // Verbindungen\n            await this.writeJourneyStates(basePath, journeys);\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyBaseStateWriteError ', (err as Error).message));\n        }\n    }\n    /**\n     * schreibt die Verbindung in die States.\n     *\n     * @param basePath Basis-Pfad f\u00FCr die States\n     * @param journeys Verbindungsdaten als Array von Hafas.Journeys\n     */\n    async writeJourneyStates(basePath: string, journeys: Hafas.Journeys): Promise<void> {\n        try {\n            if (Array.isArray(journeys.journeys) && journeys.journeys.length > 0) {\n                for (const [index, journey] of journeys.journeys.entries()) {\n                    const journeyPath = `${basePath}.Journey_${`00${index}`.slice(-2)}`;\n                    const [arrivalDelayed, arrivalOnTime] = this.getDelayStatus(journey.legs[0].arrivalDelay, 0);\n                    const [departureDelayed, departureOnTime] = this.getDelayStatus(\n                        journey.legs[journey.legs.length - 1].departureDelay,\n                        0,\n                    );\n                    const changes = journey.legs.filter((leg: { walking: boolean }) => leg.walking === true).length;\n                    const durationMinutes = Math.round(\n                        (new Date(journey.legs[journey.legs.length - 1].arrival).getTime() -\n                            new Date(journey.legs[0].departure).getTime()) /\n                            60_000,\n                    );\n                    // Channel\n                    await this.library.writedp(`${journeyPath}`, undefined, {\n                        _id: 'nicht_definieren',\n                        type: 'channel',\n                        common: {\n                            name: this.library.translate('journey', index + 1),\n                        },\n                        native: {},\n                    });\n                    // Rohdaten der Verbindung\n                    await this.library.writedp(`${journeyPath}.json`, JSON.stringify(journey), {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('raw_journey_data', index + 1),\n                            type: 'string',\n                            role: 'json',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Arrival\n                    await this.library.writedp(`${journeyPath}.Arrival`, journey.legs[0].arrival, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_arrival'),\n                            type: 'string',\n                            role: 'date',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Arrival Planned\n                    await this.library.writedp(`${journeyPath}.ArrivalPlanned`, journey.legs[0].plannedArrival, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_arrival_planned'),\n                            type: 'string',\n                            role: 'date',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Arrival Delay\n                    await this.library.writedp(`${journeyPath}.ArrivalDelay`, journey.legs[0].arrivalDelay, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_arrival_delay'),\n                            type: 'number',\n                            role: 'value',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Arrival Delayed\n                    await this.library.writedp(`${journeyPath}.ArrivalDelayed`, arrivalDelayed, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_arrival_delayed'),\n                            type: 'boolean',\n                            role: 'indicator',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Arrival On Time\n                    await this.library.writedp(`${journeyPath}.ArrivalOnTime`, arrivalOnTime, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_arrival_on_time'),\n                            type: 'boolean',\n                            role: 'indicator',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Departure\n                    await this.library.writedp(\n                        `${journeyPath}.Departure`,\n                        journey.legs[journey.legs.length - 1].departure,\n                        {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        },\n                    );\n                    // Departure Planned\n                    await this.library.writedp(\n                        `${journeyPath}.DeparturePlanned`,\n                        journey.legs[journey.legs.length - 1].plannedDeparture,\n                        {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_planned'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        },\n                    );\n                    // Departure Delay\n                    await this.library.writedp(\n                        `${journeyPath}.DepartureDelay`,\n                        journey.legs[journey.legs.length - 1].departureDelay,\n                        {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_delay'),\n                                type: 'number',\n                                role: 'value',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        },\n                    );\n                    // Departure Delayed\n                    await this.library.writedp(`${journeyPath}.DepartureDelayed`, departureDelayed, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_departure_delayed'),\n                            type: 'boolean',\n                            role: 'indicator',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Departure On Time\n                    await this.library.writedp(`${journeyPath}.DepartureOnTime`, departureOnTime, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_departure_on_time'),\n                            type: 'boolean',\n                            role: 'indicator',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Changes\n                    await this.library.writedp(`${journeyPath}.Changes`, changes, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_changes'),\n                            type: 'number',\n                            role: 'value',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Duration Minutes\n                    await this.library.writedp(`${journeyPath}.DurationMinutes`, durationMinutes, {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('journey_duration_minutes'),\n                            type: 'number',\n                            role: 'value',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Teilstrecken/Legs der Verbindung\n                    await this.writeLegStates(journeyPath, journey.legs);\n                }\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyStateWriteError ', (err as Error).message));\n        }\n    }\n\n    /**\n     * schreibt die Teilstrecken/Legs der Verbindung in die States.\n     *\n     * @param basePath Basis-Pfad f\u00FCr die States\n     * @param legs     Teilstrecken/Legs der Verbindung\n     */\n    async writeLegStates(basePath: string, legs: Hafas.Leg[]): Promise<void> {\n        try {\n            if (Array.isArray(legs) && legs.length > 0) {\n                for (const [index, leg] of legs.entries()) {\n                    const legPath = `${basePath}.Leg_${`00${index}`.slice(-2)}`;\n                    const description =\n                        leg.walking === true\n                            ? this.library.translate('journey_walking')\n                            : this.library.translate('journey_leg');\n                    const stationFrom = leg.origin?.name || this.library.translate('unknown_station');\n                    const stationTo = leg.destination?.name || this.library.translate('unknown_station');\n                    const name = leg.walking\n                        ? this.library.translate(`journey_change`, stationFrom)\n                        : this.library.translate(`journey_leg_FromTo`, stationFrom, stationTo);\n                    const [arrivalDelayed, arrivalOnTime] = this.getDelayStatus(leg.arrivalDelay, 0);\n                    const [departureDelayed, departureOnTime] = this.getDelayStatus(leg.departureDelay, 0);\n                    // Channel\n                    await this.library.writedp(`${legPath}`, undefined, {\n                        _id: 'nicht_definieren',\n                        type: 'channel',\n                        common: {\n                            name: name,\n                            desc: description,\n                        },\n                        native: {},\n                    });\n                    // Rohdaten der Teilstrecke\n                    await this.library.writedp(`${legPath}.json`, JSON.stringify(leg), {\n                        _id: 'nicht_definieren',\n                        type: 'state',\n                        common: {\n                            name: this.library.translate('raw_journey_leg_data', index + 1),\n                            type: 'string',\n                            role: 'json',\n                            read: true,\n                            write: false,\n                        },\n                        native: {},\n                    });\n                    // Schreibe Stationsdaten Startstation\n                    await this.writeStationLegData(legPath, leg, true);\n                    if (leg.walking !== true) {\n                        // Schreibe Stationsdaten Zielstation\n                        await this.writeStationLegData(legPath, leg, false);\n                        // Schreibe Linieninformationen, falls vorhanden\n                        await this.writeLineLegData(legPath, leg);\n                        // Arrival\n                        await this.library.writedp(`${legPath}.Arrival`, leg.arrival, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_arrival'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Arrival Planned\n                        await this.library.writedp(`${legPath}.ArrivalPlanned`, leg.plannedArrival, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_arrival_planned'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Arrival Delay\n                        await this.library.writedp(`${legPath}.ArrivalDelay`, leg.arrivalDelay, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_arrival_delay'),\n                                type: 'number',\n                                role: 'value',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Arrival Delayed\n                        await this.library.writedp(`${legPath}.ArrivalDelayed`, arrivalDelayed, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_arrival_delayed'),\n                                type: 'boolean',\n                                role: 'indicator',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Arrival On Time\n                        await this.library.writedp(`${legPath}.ArrivalOnTime`, arrivalOnTime, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_arrival_on_time'),\n                                type: 'boolean',\n                                role: 'indicator',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Departure\n                        await this.library.writedp(`${legPath}.Departure`, leg.departure, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Departure Planned\n                        await this.library.writedp(`${legPath}.DeparturePlanned`, leg.plannedDeparture, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_planned'),\n                                type: 'string',\n                                role: 'date',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Departure Delay\n                        await this.library.writedp(`${legPath}.DepartureDelay`, leg.departureDelay, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_delay'),\n                                type: 'number',\n                                role: 'value',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Departure Delayed\n                        await this.library.writedp(`${legPath}.DepartureDelayed`, departureDelayed, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_delayed'),\n                                type: 'boolean',\n                                role: 'indicator',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                        // Departure On Time\n                        await this.library.writedp(`${legPath}.DepartureOnTime`, departureOnTime, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_departure_on_time'),\n                                type: 'boolean',\n                                role: 'indicator',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                    } else {\n                        // Bei Fu\u00DFwegen keine Ankunfts-/Abfahrtsdaten schreiben\n                        await this.library.writedp(`${legPath}.Distance`, leg.distance, {\n                            _id: 'nicht_definieren',\n                            type: 'state',\n                            common: {\n                                name: this.library.translate('journey_distance_meters'),\n                                type: 'number',\n                                role: 'value',\n                                read: true,\n                                write: false,\n                            },\n                            native: {},\n                        });\n                    }\n                }\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyLegStateWriteError', (err as Error).message));\n        }\n    }\n\n    /**\n     * Schreibt die Daten einer Station in die States.\n     *\n     * @param legPath   Basis-Pfad f\u00FCr die States der Teilstrecke\n     * @param leg       Die Teilstrecke/Leg, aus der die Stationsdaten entnommen werden\n     * @param from      true = Startstation, false = Zielstation\n     */\n    private async writeStationLegData(legPath: string, leg: Hafas.Leg, from: boolean): Promise<void> {\n        try {\n            const stationFrom = leg.origin?.name || this.library.translate('unknown_station');\n            const stationTo = leg.destination?.name || this.library.translate('unknown_station');\n            const Path = `${legPath}.${from ? 'StationFrom' : 'StationTo'}`;\n            // Channel\n            await this.library.writedp(Path, undefined, {\n                _id: 'nicht_definieren',\n                type: 'channel',\n                common: {\n                    name: from ? stationFrom : stationTo,\n                    desc: this.library.translate(from ? 'from_station' : 'to_station'),\n                },\n                native: {},\n            });\n            // Rohdaten der Station\n            await this.library.writedp(`${Path}.JSON`, JSON.stringify(from ? leg.origin : leg.destination), {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('raw_station_data'),\n                    type: 'string',\n                    role: 'json',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Schreibe Namen der Station\n            await this.library.writedp(`${Path}.Name`, from ? stationFrom : stationTo, {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('station_name'),\n                    type: 'string',\n                    role: 'info.name',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Schriebe Type der Station\n            await this.library.writedp(`${Path}.Type`, from ? leg.origin?.type : leg.destination?.type, {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('station_type'),\n                    type: 'string',\n                    role: 'info.type',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Schreibe ID der Station\n            await this.library.writedp(`${Path}.ID`, from ? leg.origin?.id : leg.destination?.id, {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('station_id'),\n                    type: 'string',\n                    role: 'info.id',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Schreibe Platform der Station\n            await this.library.writedp(`${Path}.Platform`, from ? leg.departurePlatform : leg.arrivalPlatform, {\n                _id: 'nicht_definieren',\n                type: 'state',\n                common: {\n                    name: this.library.translate('station_platform'),\n                    type: 'string',\n                    role: 'text',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n            // Schreibe Planned Platform der Station\n            await this.library.writedp(\n                `${Path}.PlatformPlanned`,\n                from ? leg.plannedDeparturePlatform : leg.plannedArrivalPlatform,\n                {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('station_platform_planned'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                },\n            );\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyLegStationWriteError', (err as Error).message));\n        }\n    }\n\n    /**\n     * Schreibt die Linieninformationen einer Teilstrecke in die States.\n     *\n     * @param legPath   Basis-Pfad f\u00FCr die States der Teilstrecke\n     * @param leg       Die Teilstrecke/Leg, aus der die Linieninformationen entnommen werden\n     */\n    private async writeLineLegData(legPath: string, leg: Hafas.Leg): Promise<void> {\n        try {\n            if (leg.line) {\n                // Channel\n                const linePath = `${legPath}.Line`;\n                await this.library.writedp(linePath, undefined, {\n                    _id: 'nicht_definieren',\n                    type: 'channel',\n                    common: {\n                        name: leg.line.name || this.library.translate('unknown_line'),\n                        desc: this.library.translate('journey_line_info'),\n                    },\n                    native: {},\n                });\n                // direction\n                await this.library.writedp(`${linePath}.Direction`, leg.direction, {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('journey_direction'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                });\n                // product\n                await this.library.writedp(`${linePath}.Product`, leg.line.product, {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('journey_product'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                });\n                // Mode\n                await this.library.writedp(`${linePath}.Mode`, leg.line.mode, {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('journey_mode'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                });\n                // Name\n                await this.library.writedp(`${linePath}.Name`, leg.line.name, {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('journey_name'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                });\n                // Operator\n                await this.library.writedp(`${linePath}.Operator`, leg.line.operator?.name, {\n                    _id: 'nicht_definieren',\n                    type: 'state',\n                    common: {\n                        name: this.library.translate('journey_operator'),\n                        type: 'string',\n                        role: 'text',\n                        read: true,\n                        write: false,\n                    },\n                    native: {},\n                });\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_journeyLegLineWriteError', (err as Error).message));\n        }\n    }\n\n    /**\n     * Pr\u00FCft den Versp\u00E4tungsstatus.\n     *\n     * @param Delay Versp\u00E4tung in Sekunden (null = keine Daten, undefined = keine Versp\u00E4tung)\n     * @param offSet Zeitoffset in minuten\n     * @returns [delayed, onTime] - delayed=true wenn versp\u00E4tet, onTime=true wenn p\u00FCnktlich\n     */\n    private getDelayStatus(Delay: number | null | undefined, offSet: number = 0): [boolean, boolean] {\n        if (Delay === null || Delay === undefined) {\n            return [false, false]; // Keine Daten verf\u00FCgbar\n        }\n        const delayed = Delay - offSet * 60 > 0;\n        const onTime = Delay - offSet * 60 <= 0;\n        return [delayed, onTime];\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
