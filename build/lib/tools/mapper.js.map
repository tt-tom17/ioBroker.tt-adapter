{
  "version": 3,
  "sources": ["../../../src/lib/tools/mapper.ts"],
  "sourcesContent": ["import type * as Hafas from 'hafas-client';\nimport type { DepartureState, StationState } from '../types/types';\n/**\n * Gruppiert Remarks nach Typ und fasst deren Texte zusammen\n *\n * @param remarks Array von Remark Objekten\n */\nfunction groupRemarksByType(remarks: readonly (Hafas.Hint | Hafas.Status | Hafas.Warning)[]): {\n    hint: string | null;\n    warning: string | null;\n    status: string | null;\n} {\n    const hints: string[] = [];\n    const warnings: string[] = [];\n    const statuses: string[] = [];\n\n    for (const remark of remarks) {\n        switch (remark.type) {\n            case 'hint':\n                hints.push(remark.text ?? '');\n                break;\n            case 'warning':\n                warnings.push(remark.text ?? '');\n                break;\n            case 'status':\n                statuses.push(remark.text ?? '');\n                break;\n        }\n    }\n\n    return {\n        hint: hints.length > 0 ? hints.join('\\n') : null,\n        warning: warnings.length > 0 ? warnings.join('\\n') : null,\n        status: statuses.length > 0 ? statuses.join('\\n') : null,\n    };\n}\n\n/**\n * Konvertiert HAFAS Departure zu reduzierten DepartureState\n *\n * @param departure HAFAS Departure Objekt\n */\nexport function mapDepartureToDepartureState(departure: Hafas.Alternative): DepartureState {\n    return {\n        when: departure.when ?? null,\n        plannedWhen: departure.plannedWhen ?? null,\n        delay: departure.delay ?? null,\n        direction: departure.direction ?? null,\n        platform: departure.platform ?? null,\n        plannedPlatform: departure.plannedPlatform ?? null,\n        line: {\n            name: departure.line?.name ?? null,\n            fahrtNr: departure.line?.fahrtNr ?? null,\n            productName: departure.line?.productName ?? null,\n            mode: departure.line?.mode ?? null,\n            operator: departure.line?.operator?.name ?? null,\n        },\n        remarks: groupRemarksByType(departure.remarks ?? []),\n    };\n}\n\n/**\n * Konvertiert Array von Departures zu Array von DepartureStates\n *\n * @param departures Array von HAFAS Departure Objekten\n */\nexport function mapDeparturesToDepartureStates(departures: readonly Hafas.Alternative[]): DepartureState[] {\n    return departures.map(mapDepartureToDepartureState);\n}\n\n/**\n * Konvertiert DeparturesResponse zu Array von DepartureStates\n *\n * @param response HAFAS DeparturesResponse Objekt\n */\nexport function mapDeparturesResponseToStates(response: Hafas.Departures): DepartureState[] {\n    return mapDeparturesToDepartureStates(response.departures);\n}\n\nexport function mapStationToStationState(station: Hafas.Station): StationState {\n    return {\n        name: station.name,\n        id: station.id,\n        type: station.type,\n        location: station.location\n            ? {\n                  latitude: station.location.latitude,\n                  longitude: station.location.longitude,\n              }\n            : undefined,\n    };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,SAAS,mBAAmB,SAI1B;AAXF;AAYI,QAAM,QAAkB,CAAC;AACzB,QAAM,WAAqB,CAAC;AAC5B,QAAM,WAAqB,CAAC;AAE5B,aAAW,UAAU,SAAS;AAC1B,YAAQ,OAAO,MAAM;AAAA,MACjB,KAAK;AACD,cAAM,MAAK,YAAO,SAAP,YAAe,EAAE;AAC5B;AAAA,MACJ,KAAK;AACD,iBAAS,MAAK,YAAO,SAAP,YAAe,EAAE;AAC/B;AAAA,MACJ,KAAK;AACD,iBAAS,MAAK,YAAO,SAAP,YAAe,EAAE;AAC/B;AAAA,IACR;AAAA,EACJ;AAEA,SAAO;AAAA,IACH,MAAM,MAAM,SAAS,IAAI,MAAM,KAAK,IAAI,IAAI;AAAA,IAC5C,SAAS,SAAS,SAAS,IAAI,SAAS,KAAK,IAAI,IAAI;AAAA,IACrD,QAAQ,SAAS,SAAS,IAAI,SAAS,KAAK,IAAI,IAAI;AAAA,EACxD;AACJ;AAOO,SAAS,6BAA6B,WAA8C;AA1C3F;AA2CI,SAAO;AAAA,IACH,OAAM,eAAU,SAAV,YAAkB;AAAA,IACxB,cAAa,eAAU,gBAAV,YAAyB;AAAA,IACtC,QAAO,eAAU,UAAV,YAAmB;AAAA,IAC1B,YAAW,eAAU,cAAV,YAAuB;AAAA,IAClC,WAAU,eAAU,aAAV,YAAsB;AAAA,IAChC,kBAAiB,eAAU,oBAAV,YAA6B;AAAA,IAC9C,MAAM;AAAA,MACF,OAAM,qBAAU,SAAV,mBAAgB,SAAhB,YAAwB;AAAA,MAC9B,UAAS,qBAAU,SAAV,mBAAgB,YAAhB,YAA2B;AAAA,MACpC,cAAa,qBAAU,SAAV,mBAAgB,gBAAhB,YAA+B;AAAA,MAC5C,OAAM,qBAAU,SAAV,mBAAgB,SAAhB,YAAwB;AAAA,MAC9B,WAAU,2BAAU,SAAV,mBAAgB,aAAhB,mBAA0B,SAA1B,YAAkC;AAAA,IAChD;AAAA,IACA,SAAS,oBAAmB,eAAU,YAAV,YAAqB,CAAC,CAAC;AAAA,EACvD;AACJ;AAOO,SAAS,+BAA+B,YAA4D;AACvG,SAAO,WAAW,IAAI,4BAA4B;AACtD;AAOO,SAAS,8BAA8B,UAA8C;AACxF,SAAO,+BAA+B,SAAS,UAAU;AAC7D;AAEO,SAAS,yBAAyB,SAAsC;AAC3E,SAAO;AAAA,IACH,MAAM,QAAQ;AAAA,IACd,IAAI,QAAQ;AAAA,IACZ,MAAM,QAAQ;AAAA,IACd,UAAU,QAAQ,WACZ;AAAA,MACI,UAAU,QAAQ,SAAS;AAAA,MAC3B,WAAW,QAAQ,SAAS;AAAA,IAChC,IACA;AAAA,EACV;AACJ;",
  "names": []
}
