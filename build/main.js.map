{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["import * as utils from '@iobroker/adapter-core';\nimport { VendoService } from './lib/class/dbVendoService';\nimport { DepartureRequest } from './lib/class/departure';\nimport { HafasService } from './lib/class/hafasService';\nimport { StationRequest } from './lib/class/station';\nimport { Library } from './lib/tools/library';\nimport type { ITransportService } from './lib/types/transportService';\n\nexport class TTAdapter extends utils.Adapter {\n    library: Library;\n    unload: boolean = false;\n    hService!: HafasService;\n    vService!: VendoService;\n    activeService!: ITransportService;\n    depRequest!: DepartureRequest;\n    stationRequest!: StationRequest;\n    private pollIntervall: ioBroker.Interval | undefined;\n\n    /**\n     * Creates an instance of the adapter.\n     *\n     * @param options The adapter options\n     */\n    public constructor(options: Partial<utils.AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: 'tt-adapter',\n            useFormatDate: true,\n        });\n        this.library = new Library(this);\n        this.on('ready', this.onReady.bind(this));\n        this.on('stateChange', this.onStateChange.bind(this));\n        // this.on('objectChange', this.onObjectChange.bind(this));\n        this.on('message', this.onMessage.bind(this));\n        this.on('unload', this.onUnload.bind(this));\n    }\n\n    /**\n     * Gibt die Instanz des aktiven Transport-Service zur\u00FCck.\n     *\n     * @returns Die Instanz des aktiven Transport-Service\n     * @throws Fehler, wenn der Service noch nicht initialisiert wurde\n     */\n    public getActiveService(): ITransportService {\n        if (!this.activeService) {\n            throw new Error('Transport-Service wurde noch nicht initialisiert');\n        }\n        return this.activeService;\n    }\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        // Initialize your adapter here\n        await this.library.init();\n        const states = await this.getStatesAsync('*');\n        await this.library.initStates(states);\n\n        // Service basierend auf Konfiguration ausw\u00E4hlen\n        const serviceType = this.config.serviceType || 'hafas'; // 'hafas' oder 'vendo'\n        const clientName = this.config.clientName || 'iobroker-tt-adapter';\n\n        try {\n            if (serviceType === 'vendo') {\n                // VendoService initialisieren\n                this.vService = new VendoService(clientName);\n                this.vService.init();\n                this.activeService = this.vService;\n                this.log.info(this.library.translate('msg_vendoServiceInitialized', clientName));\n            } else {\n                // HafasService initialisieren (Standard)\n                const profileName = this.config.profile || 'vbb';\n                this.hService = new HafasService(clientName, profileName);\n                this.hService.init();\n                this.activeService = this.hService;\n                this.log.info(this.library.translate('msg_hafasClientInitialized', profileName));\n            }\n        } catch (error) {\n            this.log.error(this.library.translate('msg_transportServiceInitFailed', (error as Error).message));\n            return;\n        }\n\n        this.depRequest = new DepartureRequest(this);\n        this.stationRequest = new StationRequest(this);\n\n        const pollInterval = (this.config.pollInterval || 5) * 60 * 1000;\n        try {\n            if (this.getActiveService()) {\n                // Pr\u00FCfe ob Stationen konfiguriert sind\n                if (!this.config.departures || this.config.departures.length === 0) {\n                    this.log.warn(this.library.translate('msg_noStationsConfigured'));\n                    return;\n                }\n\n                // Hole alle aktivierten Stationen\n                const enabledStations = this.config.departures.filter(station => station.enabled);\n\n                if (enabledStations.length === 0) {\n                    this.log.warn(this.library.translate('msg_noEnabledStationsFound'));\n                    return;\n                }\n\n                // Logge gefundene Stationen\n                this.log.info(this.library.translate('msg_activeStationsFound', enabledStations.length));\n                for (const station of enabledStations) {\n                    this.log.info(\n                        this.library.translate('msg_stationListEntry', station.customName || station.name, station.id),\n                    );\n                }\n\n                // Starte Abfrage f\u00FCr jede aktivierte Station\n                this.pollIntervall = this.setInterval(async () => {\n                    let successCount = 0;\n                    let errorCount = 0;\n                    for (const station of enabledStations) {\n                        if (!station.id) {\n                            this.log.warn(\n                                this.library.translate('msg_stationNoValidId', station.customName || station.name),\n                            );\n                            continue;\n                        }\n                        const offsetTime = station.offsetTime ? station.offsetTime : 0;\n                        const when: Date | undefined =\n                            offsetTime === 0 ? undefined : new Date(Date.now() + offsetTime * 60 * 1000);\n                        const duration = station.duration ? station.duration : 10;\n                        const results = station.numDepartures ? station.numDepartures : 10;\n                        const options = { results: results, when: when, duration: duration };\n                        const products = station.products ? station.products : undefined;\n                        this.log.info(\n                            this.library.translate(\n                                'msg_fetchingDepartures',\n                                station.customName || station.name,\n                                station.id,\n                            ),\n                        );\n                        const success = await this.depRequest.getDepartures(\n                            station.id,\n                            this.activeService,\n                            options,\n                            products,\n                        );\n                        if (success) {\n                            successCount++;\n                            this.log.info(\n                                this.library.translate(\n                                    'msg_departuresUpdated',\n                                    station.customName || station.name,\n                                    station.id,\n                                ),\n                            );\n                        } else {\n                            errorCount++;\n                            this.log.warn(\n                                this.library.translate(\n                                    'msg_departuresUpdateFailed',\n                                    station.customName || station.name,\n                                    station.id,\n                                ),\n                            );\n                        }\n                    }\n                    this.log.info(this.library.translate('msg_queryCompleted', successCount, errorCount));\n                    this.log.info(this.library.translate('msg_waitingForNextQuery', pollInterval / 60_000));\n                }, pollInterval);\n\n                // Erste Abfrage sofort ausf\u00FChren\n                let successCount = 0;\n                let errorCount = 0;\n                for (const station of enabledStations) {\n                    if (station.id) {\n                        this.log.info(\n                            this.library.translate(\n                                'msg_fetchingDepartures',\n                                station.customName || station.name,\n                                station.id,\n                            ),\n                        );\n                        const offsetTime = station.offsetTime ? station.offsetTime : 0;\n                        const when: Date | undefined =\n                            offsetTime === 0 ? undefined : new Date(Date.now() + offsetTime * 60 * 1000);\n                        const duration = station.duration ? station.duration : 10;\n                        const results = station.numDepartures ? station.numDepartures : 10;\n                        const options = { results: results, when: when, duration: duration };\n                        const products = station.products ? station.products : undefined;\n                        const success = await this.depRequest.getDepartures(\n                            station.id,\n                            this.activeService,\n                            options,\n                            products,\n                        );\n                        if (success) {\n                            successCount++;\n                            this.log.info(\n                                this.library.translate(\n                                    'msg_departuresUpdated',\n                                    station.customName || station.name,\n                                    station.id,\n                                ),\n                            );\n                        } else {\n                            errorCount++;\n                            this.log.warn(\n                                this.library.translate(\n                                    'msg_departuresUpdateFailed',\n                                    station.customName || station.name,\n                                    station.id,\n                                ),\n                            );\n                        }\n                    }\n                }\n                this.log.info(this.library.translate('msg_firstQueryCompleted', successCount, errorCount));\n                this.log.info(this.library.translate('msg_waitingForNextQuery', pollInterval / 60_000));\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_hafasRequestFailed', (err as Error).message));\n        }\n\n        try {\n            if (this.getActiveService()) {\n                // Pr\u00FCfe ob Stationen konfiguriert sind\n                if (!this.config.departures || this.config.departures.length === 0) {\n                    this.log.warn(this.library.translate('msg_noStationsConfiguredForStationInfo'));\n                    return;\n                }\n                // Hole alle aktivierten Stationen\n                const enabledStations = this.config.departures.filter(station => station.enabled);\n\n                if (enabledStations.length === 0) {\n                    this.log.warn(this.library.translate('msg_noEnabledStations'));\n                    return;\n                }\n\n                // Logge gefundene Stationen\n                this.log.info(this.library.translate('msg_activeStationsFound', enabledStations.length));\n                for (const station of enabledStations) {\n                    this.log.info(\n                        this.library.translate('msg_stationListEntry', station.customName || station.name, station.id),\n                    );\n                }\n                for (const station of enabledStations) {\n                    if (station.id) {\n                        this.log.info(\n                            this.library.translate(\n                                'msg_fetchingStationInfo',\n                                station.customName || station.name,\n                                station.id,\n                            ),\n                        );\n                        await this.stationRequest.getStation(station.id, this.activeService);\n                    }\n                }\n            }\n        } catch (err) {\n            this.log.error(this.library.translate('msg_stationQueryError', (err as Error).message));\n        }\n    }\n\n    /**\n     * Is called when adapter shuts down - callback has to be called under any circumstances!\n     *\n     * @param callback Function to be called when unload is complete\n     */\n    private onUnload(callback: () => void): void {\n        try {\n            // Here you must clear all timeouts or intervals that may still be active\n            // clearTimeout(timeout1);\n            // clearTimeout(timeout2);\n            // ...\n            if (this.pollIntervall) {\n                clearInterval(this.pollIntervall);\n            }\n\n            callback();\n        } catch {\n            callback();\n        }\n    }\n\n    /**\n     * Is called if a subscribed state changes\n     *\n     * @param id The id of the state that changed\n     * @param state The new state object or null/undefined if deleted\n     */\n    private onStateChange(id: string, state: ioBroker.State | null | undefined): void {\n        if (state) {\n            // The state was changed\n            this.log.info(`state ${id} changed: ${state.val} (ack = ${state.ack})`);\n        } else {\n            // The state was deleted\n            this.log.info(`state ${id} deleted`);\n        }\n    }\n\n    /**\n     * Some message was sent to this instance over message box. Used by email, pushover, text2speech, ...\n     * Using this method requires \"common.messagebox\" property to be set to true in io-package.json\n     *\n     *  @param obj iobroker.message\n     */\n    private async onMessage(obj: ioBroker.Message): Promise<void> {\n        if (typeof obj === 'object' && obj.message) {\n            if (obj.command === 'location') {\n                // Stationssuche f\u00FCr Admin-UI\n                try {\n                    const message = obj.message as { query: string };\n                    const query = message.query;\n\n                    if (!query || query.length < 2) {\n                        if (obj.callback) {\n                            this.sendTo(\n                                obj.from,\n                                obj.command,\n                                { error: this.library.translate('msg_queryTooShort') },\n                                obj.callback,\n                            );\n                        }\n                        return;\n                    }\n\n                    const results = await this.activeService.getLocations(query, { results: 20 });\n\n                    // Formatiere Ergebnisse f\u00FCr die UI\n                    const stations = results.map((location: any) => ({\n                        id: location.id,\n                        name: location.name,\n                        type: location.type,\n                        location: location.location\n                            ? {\n                                  latitude: location.location.latitude,\n                                  longitude: location.location.longitude,\n                              }\n                            : undefined,\n                        products: location.products,\n                    }));\n\n                    if (obj.callback) {\n                        this.sendTo(obj.from, obj.command, stations, obj.callback);\n                    }\n                } catch (error) {\n                    this.log.error(this.library.translate('msg_locationSearchFailed', (error as Error).message));\n                    if (obj.callback) {\n                        this.sendTo(obj.from, obj.command, { error: (error as Error).message }, obj.callback);\n                    }\n                }\n            }\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new TTAdapter(options);\n} else {\n    // otherwise start the instance directly\n    (() => new TTAdapter())();\n}\n"],
  "mappings": "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",
  "names": ["successCount", "errorCount"]
}
